---
id: 8
title: spring-boot-gradle pluginì˜ executable packaging
date: 2023-08-01
description: ê°œë°œìëŠ” ì´ í”ŒëŸ¬ê·¸ì¸ ë•ë¶„ì— jar, war ì•„ì¹´ì´ë¸Œë¥¼ íŒ¨í‚¤ì§• í•  ìˆ˜ ìˆê³ , Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.
tags:
  - bootJar
  - Gradle
  - Spring Boot
---
# spring-boot-gradle plugin

Spring Boot ê·¸ë˜ë“¤ í”ŒëŸ¬ê·¸ì¸ì€ ìŠ¤í”„ë§íŒ€ì—ì„œ ë§Œë“ ë‹¤ê³ í•œë‹¤. ê·¸ë¦¬ê³  ì´ ê°œë°œí•œ í”ŒëŸ¬ê·¸ì¸ì„ gradle plugin í¬í„¸ì— ë°°í¬í•˜ëŠ” ê²ƒì´ë‹¤.

ìš°ë¦¬ëŠ” ì´ í”ŒëŸ¬ê·¸ì¸ ë•ë¶„ì— ì‹¤í–‰ ê°€ëŠ¥í•œ jar, war ì•„ì¹´ì´ë¸Œë¥¼ íŒ¨í‚¤ì§• í•  ìˆ˜ ìˆê³ , Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ì´ í”ŒëŸ¬ê·¸ì¸ì€ `spring-boot-dependencies`ê°€ ì œê³µí•˜ëŠ” ë””íŒ¬ë˜ì‹œ ê´€ë¦¬ë²•ì„ ì‚¬ìš©í•œë‹¤.

Gradle 7.x (7.5 or later) ë˜ëŠ” 8.x ë²„ì „ì„ í•„ìš”ë¡œ í•œë‹¤.

## ì‹œì‘

ìŠ¤í”„ë§ë¶€íŠ¸ ì‚¬ìš©ìë¼ë©´ ìµìˆ™í•˜ê² ì§€ë§Œ, ìš°ë¦¬ê°€ spring ì´ë‹ˆì…œë¼ì´ì €ë¡œ gradle í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í–ˆì„ ë•Œ, ìŠ¤í¬ë¦½íŠ¸ ë§¨ìœ„ì—ì„œ ì´ ë¸”ë¡ì„ ë³¼ ìˆ˜ ìˆë‹¤.

```java
plugins {
	id 'org.springframework.boot' version '3.1.5'
}
```

ì›ë˜ í”ŒëŸ¬ê·¸ì¸ì´ë€ gradle taskì˜ ë¬¶ìŒì´ë‹¤. ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•¨ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ë‹¤ìŒ íƒœìŠ¤í¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

- `bootJar`
- `bootWar`
- `bootBuildImage`

## ë””íŒ¬ë˜ì‹œ ê´€ë¦¬ëŠ” ë‹¤ë¥¸ í”ŒëŸ¬ê·¸ì¸ê³¼ í•¨ê»˜.

gradleë¡œ spring bootë¥¼ ì´ìš©í•˜ëŠ” ì‚¬ëŒë“¤ ëŒ€ë¶€ë¶„ì´ [`io.spring.dependency-management`](https://github.com/spring-gradle-plugins/dependency-management-plugin) ë¥¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³¸ì  ë§ì„ ê²ƒì´ë‹¤.

```groovy
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.1.1'
    id 'io.spring.dependency-management' version '1.1.0' // !
    id 'jacoco'
}
```

dependency ë¸”ë¡ì—ì„œ, spring boot ìŠ¤íƒ€í„°ë¥¼ ì„ ì–¸í•  ë•Œ ë²„ì „ì„ ëª…ì‹œí•´ì£¼ì§€ ì•Šì•„ë„ ë˜ëŠ” ì´ìœ ëŠ”, ë°”ë¡œ ì´ dependency-management í”ŒëŸ¬ê·¸ì¸ ë•ë¶„ì´ë‹¤.

```groovy
dependencies {
    implementation('org.springframework.boot:spring-boot-starter-web')
    implementation('org.springframework.boot:spring-boot-starter-data-jpa')

    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'io.micrometer:micrometer-registry-prometheus'
}
```

starterë“¤ì€ spring boot í”„ë¡œì íŠ¸ì˜ ë²„ì „ì„ ìƒì†ë°›ì•„ ì‚¬ìš©í•˜ê³ , í¬í•¨ë˜ì§€ ì•ŠëŠ” ì˜ì¡´ì„±ë“¤ì€ spring boot BOMì— ëª…ì‹œëœ ë²„ì „ì„ ì‚¬ìš©í•œë‹¤.

ì´ ë§í¬ê°€ SpringBootì—ì„œ ê´€ë¦¬í•˜ëŠ” ë””íŒ¬ë˜ì‹œì™€ ê·¸ ë²„ì „ì˜ ëª©ë¡ì´ë‹¤.

[Dependency Versions](https://docs.spring.io/spring-boot/docs/current/reference/html/dependency-versions.html)

ìœ„ ë¬¸ì„œì— ë“¤ì–´ê°€ë©´, ìœ„ì—ì„œ ìŠ¤íƒ€í„°ê°€ ì•„ë‹Œ ì˜ì¡´ì„±ì´ì—ˆë˜ `micrometer-registry-prometheus` ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.

![240217-154311](/posts/8-gradle-executable-packaging/240217-154311.png)

## Executable Archives (Jar/War)

ë‹¤ì‹œ, `org.springframework.boot` ë¡œ ëŒì•„ì˜¤ì.

ì´ í”ŒëŸ¬ê·¸ì¸ì€ ìš°ë¦¬ê°€ ì •ë§ ë§ì´ ë´ì™”ë˜ Task, `bootJar` ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ì¦‰, íŒ¨í‚¤ì§•ì„ í•˜ëŠ” íƒœìŠ¤í¬ë¥¼ ê°€ì§„ë‹¤ëŠ” ê²ƒ.

`bootJar` ëŠ” `bootWar` ê³¼ í•¨ê»˜ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  dependencyë¥¼ í¬í•¨í•˜ëŠ” executable ì•„ì¹´ì´ë¸Œ, ì¦‰ jar/war íŒŒì¼ì„ íŒ¨í‚¤ì§•í•œë‹¤.

<aside>
    ğŸ’¡ jar/war íŒŒì¼ì€ `java -jar` ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆì—ˆë‹¤.

</aside>

### Jar íŒŒì¼ íŒ¨í‚¤ì§•

Java í”ŒëŸ¬ê·¸ì¸ì—ë„ jar íŒ¨í‚¤ì§•ì„ í•  ìˆ˜ ìˆëŠ” íƒœìŠ¤í¬ê°€ ìˆì§€ë§Œ, Spring boot ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íŒ¨í‚¤ì§•í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤. ê·¸ë¦¬ê³  spring boot pluginì—ì„œëŠ” `bootJar` ë¼ëŠ” íƒœìŠ¤í¬ë¥¼ ì œê³µí•œë‹¤.

spring boot í”ŒëŸ¬ê·¸ì¸ì€ gradleì˜ java í”ŒëŸ¬ê·¸ì¸ì˜ íƒœìŠ¤í¬ `assemble`ê³¼ ìƒí˜¸ì‘ìš©í•œë‹¤. spring boot í”ŒëŸ¬ê·¸ì¸ê³¼ java í”ŒëŸ¬ê·¸ì¸ì´ í™œì„±í™”ë˜ë©´, java í”ŒëŸ¬ê·¸ì¸ì˜ `jar` íƒœìŠ¤í¬ê°€ `BootJar` ì¸ìŠ¤í„´ìŠ¤ë¡œ ìƒì„±ëœë‹¤.

```java
import org.gradle.api.tasks.bundling.Jar;

public abstract class BootJar extends Jar implements BootArchive
```

ì¶œì²˜: [spring-boot-gradle-plugin í”„ë¡œì íŠ¸ ì½”ë“œ](https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-tools/spring-boot-gradle-plugin/src/main/java/org/springframework/boot/gradle/tasks/bundling/BootJar.java)

ê·¸ë¦¬ê³  ìë™ìœ¼ë¡œ `assemble` / `build`íƒœìŠ¤í¬ê°€ `bootJar` ì— ì˜ì¡´í•˜ë„ë¡ ì„¤ì •ë˜ê¸° ë•Œë¬¸ì— assemble ë˜ëŠ” buildë¥¼ ì‹¤í–‰í•˜ë©´ bootJar íƒœìŠ¤í¬ê°€ ì„ í–‰ëœë‹¤.

- Java í”ŒëŸ¬ê·¸ì¸ë§Œìœ¼ë¡œëŠ” ì•ˆë˜ëŠ” ì´ìœ  (spring boot í”ŒëŸ¬ê·¸ì¸ì´ íŒ¨í‚¤ì§• ì‹œ í•˜ëŠ” ì¼)

Java í”ŒëŸ¬ê·¸ì¸ì˜ **`jar`** íƒœìŠ¤í¬ê°€ ìƒì„±í•˜ëŠ” JAR íŒŒì¼ì€ Spring Bootì˜ **`bootJar`** íƒœìŠ¤í¬ê°€ ìƒì„±í•˜ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ JAR íŒŒì¼ê³¼ëŠ” ë‹¤ë¦…ë‹ˆë‹¤. **`jar`** íƒœìŠ¤í¬ë¡œ ìƒì„±ëœ JAR íŒŒì¼ì€ ë‹¨ë…ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©°, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ìì²´ì ìœ¼ë¡œ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°˜ë©´, **`bootJar`** íƒœìŠ¤í¬ëŠ” Spring Bootì˜ **ì„ë² ë””ë“œ ì„œë²„ì™€ ëª¨ë“  ì˜ì¡´ì„±ì„ í¬í•¨í•˜ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ JAR íŒŒì¼ì„ ìƒì„±í•œë‹¤.**

[GPTì™€ì˜ ëŒ€í™”](https://chat.openai.com/share/8a4c79c0-69ea-491d-a0c3-61d5e9d443d3)


### ğŸŒŸÂ `bootJar` íƒœìŠ¤í¬ê°€ í¬í•¨í•˜ëŠ” íŒŒì¼ì˜ ìœ„ì¹˜

bootJar íƒœìŠ¤í¬ëŠ” spring boot í”„ë¡œì íŠ¸ì˜ í´ë˜ìŠ¤ íŒŒì¼ê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ í•¨ê»˜ íŒ¨í‚¤ì§•í•œë‹¤.

- í´ë˜ìŠ¤ íŒŒì¼: source rootì—ì„œ ì»´íŒŒì¼ëœ í´ë˜ìŠ¤ íŒŒì¼
â†’ ê¸°ë³¸ ì†ŒìŠ¤ ë£¨íŠ¸ëŠ” src/main/java. ì»´íŒŒì¼ ìœ„ì¹˜ì¸ `build/classes/java/main` ì— ìœ„ì¹˜í•œ í´ë˜ìŠ¤ íŒŒì¼ë“¤
- ë¦¬ì†ŒìŠ¤ íŒŒì¼: resource rootì—ì„œ ì˜®ê²¨ì§„ ë¦¬ì†ŒìŠ¤ íŒŒì¼

â†’ ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ ë£¨íŠ¸ê°€ src/main/resources ì´ë¯€ë¡œ `build/resources/main` ì— ìœ„ì¹˜í•œë‹¤.


### War íŒŒì¼ íŒ¨í‚¤ì§•

War íŒ¨í‚¤ì§•ì€ Jarì™€ êµ‰ì¥íˆ ë¹„ìŠ·í•˜ë‹¤.

java í”ŒëŸ¬ê·¸ì¸ì´ ì•„ë‹Œ war í”ŒëŸ¬ê·¸ì¸ì´ í™œì„±í™”ë˜ë©´ `war`íƒœìŠ¤í¬ê°€ `BootWar` ì¸ìŠ¤í„´ìŠ¤ë¡œ ìƒì„±ëœë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ìë™ìœ¼ë¡œ `assemble` ê³¼ `build` íƒœìŠ¤í¬ê°€ `bootWar` ì— ì˜ì¡´í•˜ë„ë¡ ì„¤ì •ëœë‹¤.

## Plain Archives

ê¸°ë³¸ì ìœ¼ë¡œ bootJar ë˜ëŠ” bootWar ì‘ì—…ì„ êµ¬ì„±í•  ë•Œ jar ë˜ëŠ” war ì‘ì—…ì€ ì•„ì¹´ì´ë¸Œ ë¶„ë¥˜ê¸°ì˜ ê·œì¹™ìœ¼ë¡œ `plain`ì„ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ bootJarì™€ jar ë˜ëŠ” bootWarì™€ warì˜ ì¶œë ¥ ìœ„ì¹˜ê°€ ì„œë¡œ ë‹¤ë¥´ë¯€ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì•„ì¹´ì´ë¸Œì™€ ì¼ë°˜ ì•„ì¹´ì´ë¸Œë¥¼ ë™ì‹œì— ë¹Œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## OCI ì´ë¯¸ì§€ íŒ¨í‚¤ì§•

https://github.com/opencontainers/image-spec

spring-boot í”ŒëŸ¬ê·¸ì¸ì€ jar/war íŒŒì¼ë¡œë¶€í„° OCI ì´ë¯¸ì§€ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì´ë¯¸ì§€ëŠ” `bootBuildImage` íƒœìŠ¤í¬ë¥¼ í†µí•´ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

`bootBuildImage` íƒœìŠ¤í¬ëŠ” spring-boot í”ŒëŸ¬ê·¸ì¸ ì„¤ì •ì‹œ java ë˜ëŠ” war í”ŒëŸ¬ê·¸ì¸ì´ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤. ì´ë•Œ ìƒì„±ë˜ëŠ” ê°ì²´ëŠ” `BootBuildImage` ì˜ ì¸ìŠ¤í„´ìŠ¤ë‹¤.

# Reference

> https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/ ì˜ 1~5ë²ˆ
>
