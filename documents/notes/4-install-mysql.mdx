---
id: 4
date: 2024-02-02
title: MySQL 설치
tags:
    - 버전 선택
    - 에디션 선택
    - Configuration File
---

## 2.1.1 버전과 에디션 선택

### 새로 설치
MySQL 서버의 버전을 선택할 때는 다른 제약 사항이 없다면 가능한 한 최신버전을 선택하는 것이 좋다고한다.
제약사항이라하면, 사용하는 솔루션이 특정 버전만 지원한다던지..)

### 업그레이드
기존 버전에서 새로운 메이저 버전으로 업그레이드 하는 경우라면 최소 패치 버전이 15~20번 이상 릴리즈된 버전을 권장.

ex) MySQL 5.7에서 MySQL 8.0 버전으로 업그레이드 할거임. 그렇다면 MySQL 8.0.15~8.0.20 정도의 안정된 버전으로 선택

그치만, 안정성이 높은 우선순위에 있지 않은 새로운 서비스라면 서비스 개발과 동시에 데이터베이스 서버를 함께 테스트하고 변경해나갈 수 있기 때문에
조금 더 빠른 버전으로 시작해도 괜찮을 수 있다. 하지만 그럼에도 갓 출시된 메이저 버전을 선택하는 것은 조금 위험할 수 있다.

그 이유는 메이저 버전은 많은 변화를 거친 릴리즈이기 때문이데,
그만큼 갓 출시된 상태에서는 치명적이고 복구하는데 많은 시간이 필요한 버그가 발견될 가능성이 높다고 한다.

### 에디션 선택

앞서 말했듯, 엔터프라이즈 에디션이 오픈소스였다가 비공개로 전환되기는 했다.
하지만 MySQL의 상용화 전략은 엔터프라이즈를 비공개하는 것이 아니다.

MySQL의 상용화 전략은 'Open Core Model' 인데, 자세히 말하자면 다음과 같다고 한다.

- 핵심이 되는 기술은 엔터프라이즈에디션과 커뮤니티에디션이 동일하게 만든다.
- 특정 부가 기능들만, 엔터프라이즈에디션에 포함한다.

즉, 엔터프라이즈 에디션과 커뮤니티 에디션의 핵심기능은 거의 차이가 없다는 것이므로
엔터프라이즈 에디션에 있는 부가기능이 꼭 필요한 상황이 아니라면 커뮤니티 에디션을 적극적으로 고려할 수 있다.

참고로 저자는 다른 솔루션들(플러그인)로 커뮤니티 에디션의 부족한 부분들을 메꿀수 있었기 때문에 엔터프라이즈 에디션의 필요성이 그다지 크지 않았다고 한다.
하지만 기술지원은 별개의 문제이고, 이처럼 본인 상황에 따라 엔터프라이즈 에디션이 필요한지 직접 검토하길 권장한다.


## 설치 고려사항 (Mac 설치하면서)

이 책에는 설치 튜토리얼이 단계별로 설명돼있는데, 그 중에서 기억해둘만한 것들을 메모하려한다.

### Configuration

- User Authentication

![](/notes/4-intall-mysql/img.png)

Strong Password Encryption을 사용하면 SHA256를 활용한 인증방식을 사용한다고 한다.
레거시 방식을 사용하면 Native Authentication을 사용하게 된다.

간단한 지침으로
MySQL 서버를 private 네트워크에서만 사용한다면 레거시 방식을 택해도 괜찮지만,
public 네트워크, 즉 인터넷을 경유해서 mysql 서버에 접속하게 된다면 String Password Encryption을 사용하라는 내용이 담겨있다.

자세한 내용은 3.2절 사용자 계정관리를 참고.

### root 설정

installer를 사용하면, 마지막에 root 계정의 비밀번호를 입력하라고 하는데,
MySQL 서버를 설치할 때 default 설정값이 데이터 디렉터리와 로그 파일들을 `/user/local/mysql` 하위에 생성하고,
**관리자 모드로 MySQL 서버 프로세스를 기동하기** 때문이다.

### mysql 서버가 설치된 디렉토리 정보

`/usr/local/mysql` 에 저장된다고 했다. 하위 디렉터리 정보는 이미지로 가져왔다.

![](/notes/4-intall-mysql/img_1.png)

나열되지 않은 것들도 있는데, 위 디렉터리들은 절대 삭제하면 안되는 것들이라고 한다.

## 서버 시작/종료

나는 평소에 커맨드를 사용했었는데, Mac에서는 환경설정에서 하는 방법도 있었다.

### 커맨드

```bash
sudo /usr/local/mysql/support-files/mysql.server start
```

```bash
sudo /usr/local/mysql/support-files/mysql.server stop
```

### 맥 환경설정
![](/notes/4-intall-mysql/img_2.png)
여기서 실행할 수 있다고 한당
![](/notes/4-intall-mysql/img_3.png)

### 시스템환경설정 에서의 기능 - Configuration

각종 디렉터리와 로그 파일들의 경로를 한 눈에 확인 가능, 관리도 gui로 가능하다.

![](/notes/4-intall-mysql/img_4.png)

처음에는 MySQL Configuration File은 준비돼있지 않은 것을 알 수 있다.

## Configuration File 만들기

1. `/usr/local/mysql` 디렉터리에 `my.cnf` 라는 파일을 생성한다.
2. 그리고 시스템환경설정>mySQL>configuration 의 Configuration File 에 `my.cnf` 경로를 입력하고 apply한다.

이 책에서 살펴보게 될 많은 내용이 이 Configuration file과 관련있으므로 이 설정파일의 경로는 기억해두는 것을 권장했다.

## 리눅스에서는?

대부분의 서비스 환경에서는 리눅스 운영체제에서 MySQL 서버를 구동한다.

### 설정파일 및 데이터파일 준비

리눅스 서버에서 yum installer나 rpm을 이용해 설치하면
MySQL 서버에 필요한 프로그램들과 디렉터리들을 일부 준비되지만

- 트랜잭션 로그파일
- 시스템 테이블

이 준비되지 않기 때문에 아직 MySQL을 구동할 수 없다.


